
<div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-lg p-6">
    <h1 class="text-2xl font-bold text-center mb-6">Set Alert Parameters</h1>

        {# Flash messages (success/error) #}
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, msg in messages %}
        <div class="mb-4 p-3 rounded
                            {% if category == 'success' %} bg-green-600
                            {% elif category == 'error' %} bg-red-600
                            {% else %} bg-gray-600 {% endif %}
                            text-sm text-white text-center">
            {{ msg }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

    <form method="POST" action="{{ url_for('api.set_thresholds_page') }}" class="flex flex-col gap-6">

        {% for level, color in [('Low','green-400'), ('Mid','yellow-400'), ('High','red-400')] %}
        <div class="p-4 rounded-lg bg-gray-700">
            <h2 class="text-lg font-semibold mb-3 text-{{ color }}">{{ level }} Alert</h2>

            <label class="block text-sm mb-1" for="{{ level|lower }}_river_max">River Max (m)</label>
            <input type="number" step="0.1" id="{{ level|lower }}_river_max" name="{{ level }}[river_max]"
                   value="{{ thresholds[level]['river_max'] if thresholds and level in thresholds else '' }}"
                   class="w-full px-3 py-2 mb-3 rounded bg-gray-600 border border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500" required>

            <label class="block text-sm mb-1" for="{{ level|lower }}_soil_min">Soil Min (%)</label>
            <input type="number" id="{{ level|lower }}_soil_min" name="{{ level }}[soil_min]"
                   value="{{ thresholds[level]['soil_min'] if thresholds and level in thresholds else '' }}"
                   class="w-full px-3 py-2 mb-3 rounded bg-gray-600 border border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500" required>

            <label class="block text-sm mb-1" for="{{ level|lower }}_soil_max">Soil Max (%)</label>
            <input type="number" id="{{ level|lower }}_soil_max" name="{{ level }}[soil_max]"
                   value="{{ thresholds[level]['soil_max'] if thresholds and level in thresholds else '' }}"
                   class="w-full px-3 py-2 rounded bg-gray-600 border border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        </div>
        {% endfor %}

        <button type="submit" class="w-full py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700">
            Update Parameters
        </button>
    </form>
</div>
